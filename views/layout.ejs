<html>
<head>
<title><%= title %></title>
<script src="/javascripts/jquery.js"></script>
<script src="/javascripts/jquery.ui.js"></script>
<script src="/javascripts/jquery.fitvids.js"></script>
<script src="/javascripts/socket.io.js"></script>
<script src="/javascripts/boxhop.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<link rel="stylesheet" href="/stylesheets/style.css"/>
<script>
$(document).ready(function(){
var socket = io.connect('127.0.0.1',{ port: 3000 });
boxhop.initialise(socket);
$('.nav_item').hover( function () { boxhop.unilluminate(this); }, function () { boxhop.illuminate(this); });
$('#login_nav').toggle( function () { boxhop.show_login(); }, function () { boxhop.hide_login(); });
$('#channels_nav').toggle( function () { boxhop.show_channels(); }, function () { boxhop.hide_channels(); });
$('#add_channel_nav').toggle( function () { boxhop.show_add_channel(); }, function () { boxhop.hide_add_channel(); });
$('#login_button').live({mouseenter:function(){ boxhop.unilluminate(this); },mouseleave:function(){ boxhop.illuminate(this); }});
$('#login_button').live("click", function () { boxhop.login(); });
$('#add_channel_button').live("click", function () { boxhop.add_channel(); });
$('#add_channel_button').live({mouseenter:function(){ boxhop.unilluminate(this); },mouseleave:function(){ boxhop.illuminate(this); }});
$('.channel_item').live("mouseout", function () { boxhop.illuminate(this); });
$('.channel_item').live("mouseover", function () { boxhop.unilluminate(this); });
$('.channel_item').live("click", function () { boxhop.playVideo(this); });

//are there more tracks
socket.on('withcallbackexamplenotused', function( callback ){
  callback();
});

socket.on('inChannel', function( channel ){
  //var find = '#nav #' + channel;
  //$(find).attr('class', 'select')
});

//displays a channel on the client
socket.on('tracks', function(response) {
    boxhop.addVideo(response);
}); 

//send message to server; inform server client is done
socket.emit('ready', { true:true });
});
</script>
</head>
<body><%-body%></body>
</html>